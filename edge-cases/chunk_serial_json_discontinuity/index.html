<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Chunk Serial Discontinuities in JSON - Video Sync</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Chunk Serial Discontinuities in JSON";
        var mkdocs_page_input_path = "edge-cases/chunk_serial_json_discontinuity.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Video Sync
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../usage/">Usage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../features/">Features</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../emu-cameras/">EMU Camera Serials</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../license/">License</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guide/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guide/program-flow/">Program Flow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer-guide/contributing/">Contributing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/datapool/">DataPool</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/nev/">Nev</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/nsx/">Nsx</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/video/">Video</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/videojson/">Videojson</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/pathutils/">Pathutils</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/utils/">Utils</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Edge Cases</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../frame_counter_anomalies/">Frame Counter Anomalies</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Chunk Serial Discontinuities in JSON</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#the-problem">The Problem</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-json">Example JSON</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#observation">Observation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#download-example-data">Download Example Data</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Video Sync</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Edge Cases</li>
      <li class="breadcrumb-item active">Chunk Serial Discontinuities in JSON</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/BCM-Neurosurgery/video-sync/edit/master/docs/edge-cases/chunk_serial_json_discontinuity.md">Edit on BCM-Neurosurgery/video-sync</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2-chunk-serial-discontinuities-in-json"><strong>2. Chunk Serial Discontinuities in JSON</strong><a class="headerlink" href="#2-chunk-serial-discontinuities-in-json" title="Permanent link">&para;</a></h1>
<h3 id="the-problem"><strong>The Problem</strong><a class="headerlink" href="#the-problem" title="Permanent link">&para;</a></h3>
<p>When analyzing chunk serial data in the JSON files, discontinuities can occur in different forms. These discontinuities can affect downstream processing, requiring careful identification and handling. The types of discontinuities observed in the dataset are:</p>
<ul>
<li>Type I Discontinuity: The number drops to zero and then increases to a value greater than 1.</li>
<li>Type II Discontinuity: The number resets from zero to 1.</li>
<li>Type III Discontinuity: The difference between consecutive numbers is greater than 1.</li>
<li>Type IV Discontinuity: The number hits -1.</li>
</ul>
<p>These discontinuities can impact the integrity of data streams, requiring careful detection and mitigation strategies.</p>
<h3 id="example-json"><strong>Example JSON</strong><a class="headerlink" href="#example-json" title="Permanent link">&para;</a></h3>
<p>Type I discontinuity</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="mi">20323583</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323583</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323583</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323583</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323583</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">20323585</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323585</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323585</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323585</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20323585</span>
<span class="p">],</span>
</code></pre></div>
<p>Type II discontinuity</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="mi">20332543</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332543</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332543</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332543</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332543</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span>
<span class="p">],</span>
<span class="err">...</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">127</span><span class="p">,</span>
<span class="w">    </span><span class="mi">127</span><span class="p">,</span>
<span class="w">    </span><span class="mi">127</span><span class="p">,</span>
<span class="w">    </span><span class="mi">127</span><span class="p">,</span>
<span class="w">    </span><span class="mi">127</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span>
<span class="p">],</span>
<span class="p">[</span>
<span class="w">    </span><span class="mi">20332673</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332673</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332673</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332673</span><span class="p">,</span>
<span class="w">    </span><span class="mi">20332673</span>
<span class="p">],</span>
</code></pre></div>
<p>Type IV discontinuities</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;chunk_serial_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">[</span>
<span class="w">            </span><span class="mi">20323571</span><span class="p">,</span>
<span class="w">            </span><span class="mi">20323571</span><span class="p">,</span>
<span class="w">            </span><span class="mi">-1</span><span class="p">,</span>
<span class="w">            </span><span class="mi">-1</span><span class="p">,</span>
<span class="w">            </span><span class="mi">-1</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="p">[</span>
<span class="w">            </span><span class="mi">20323572</span><span class="p">,</span>
<span class="w">            </span><span class="mi">20323572</span><span class="p">,</span>
<span class="w">            </span><span class="mi">20323572</span><span class="p">,</span>
<span class="w">            </span><span class="mi">20323572</span><span class="p">,</span>
<span class="w">            </span><span class="mi">20323572</span>
<span class="w">        </span><span class="p">],</span>
</code></pre></div>
<h3 id="observation"><strong>Observation</strong><a class="headerlink" href="#observation" title="Permanent link">&para;</a></h3>
<p>Running the <a href="../../notebooks/json_discontinuities.ipynb">script</a> to detect discontinuities on <a href="../../examples/YFC_20240719_091054.json">YFC_20240719_091054.json</a>, we get <a href="../../examples/2024-07-19_09%3A10%3A54_chunk_discontinuities.json">2024-07-19_09:10:54_chunk_discontinuities.json</a></p>
<p>By observation along with other json files:
- Type I discontinuities occur the most frequent with almost all JSON, with a structured gap pattern of 128 occurring repeatedly.
- Type II discontinuities occur usually once in each JSON. The chunk serial usually drops to 0, and gradually increases to 127, before dropping to 0 again and resuming from where it left off as if all those data were not missing.
- Type III discontinuities are rare.
- Type IV discontinuities often appear in the very beginning of file, suggesting its relation with booting up.</p>
<h3 id="conclusion"><strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h3>
<p>The analysis highlights a strong pattern of Type I discontinuities, suggesting a structured reset mechanism rather than random errors. The gaps of 128 could indicate an intentional segmentation in the data stream, possibly due to a recording or transmission mechanism. Extra attention is required when handling chunk serial stream in JSON files.</p>
<h3 id="download-example-data"><strong>Download Example Data</strong><a class="headerlink" href="#download-example-data" title="Permanent link">&para;</a></h3>
<p><a href="../../examples/2024-07-19_09%3A10%3A54_chunk_discontinuities.json">2024-07-19_09:10:54_chunk_discontinuities.json</a></p>
<p><a href="../../examples/YFC_20240719_091054.json">YFC_20240719_091054.json</a></p>
<p><a href="../../notebooks/json_discontinuities.ipynb">Jupyter Notebook to Reproduce Results</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../frame_counter_anomalies/" class="btn btn-neutral float-left" title="Frame Counter Anomalies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/BCM-Neurosurgery/video-sync" class="fa fa-code-fork" style="color: #fcfcfc"> BCM-Neurosurgery/video-sync</a>
        </span>
    
    
      <span><a href="../frame_counter_anomalies/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
